{% extends "base.html" %}

{% block title %}
    Tabular Worlds | Our World of Text
{% endblock %}

{% block header %}
    <h1>Tabular Worlds</h1>
{% endblock %}

{% block endhead %}
	<style>
		#world_table {
            border: solid 1px;
			border-bottom: none;
			background-color: #e6eefb;
    	}
		#world_table th {
			background-color: #7575ff;
			border-bottom: solid 1px;
		}
		#world_table td {
			border-bottom: solid 1px;
			border-right: solid 1px;
		}
		#world_table td:last-child {
			border-right: none;
		}
		.table_worldname {
			background-color: #83abe9;
		}
	</style>
{% endblock %}

{% block content %}
	<table id="world_table">
		<tbody id="worlds">
			<tr>
				<th>
					Name
				</th>
				<th>
					Write state
				</th>
				<th>
					Read state
				</th>
				<th>
					Members
				</th>
				<th>
					Views
				</th>
			</tr>
		</tbody>
	</table>
{% endblock %}

{% block endbody %}
<script>
	var worlds = document.getElementById("worlds");
	var rowNum = 0;
	var rows = {};
	function addRow(name, write, read, members, views) {
		var row = document.createElement("tr");
		var col_name = document.createElement("td");
		var col_write = document.createElement("td");
		var col_read = document.createElement("td");
		var col_members = document.createElement("td");
		var col_views = document.createElement("td");
		col_name.innerText = name;
		col_write.innerText = write;
		col_read.innerText = read;
		col_members.innerText = members;
		col_views.innerText = views;
		col_name.className = "table_worldname";
		row.id = "row_num_" + rowNum;
		rows[rowNum] = {
			row: row,
			name: name,
			write: write,
			read: read,
			members: members,
			views: views
		};
		rowNum++;
		row.appendChild(col_name);
		row.appendChild(col_write);
		row.appendChild(col_read);
		row.appendChild(col_members);
		row.appendChild(col_views);
		worlds.appendChild(row);
	}

	{% for world in worlds_owned %}addRow("{{world.name}}", {{world.writability}}, {{world.readability}}, {{world.members}}, {{world.views}});
	{% endfor %}
</script>
{% endblock %}